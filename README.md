# Проектная работа "Веб-ларек"

Стек: HTML, SCSS, TS, Webpack

Структура проекта:
- src/ — исходные файлы проекта
- src/components/ — папка с JS компонентами
- src/components/base/ — папка с базовым кодом

Важные файлы:
- src/pages/index.html — HTML-файл главной страницы
- src/types/index.ts — файл с типами
- src/index.ts — точка входа приложения
- src/styles/styles.scss — корневой файл стилей
- src/utils/constants.ts — файл с константами
- src/utils/utils.ts — файл с утилитами

## Установка и запуск
Для установки и запуска проекта необходимо выполнить команды

```
npm install
npm run start
```

или

```
yarn
yarn start
```
## Сборка

```
npm run build
```

или

```
yarn build
```

# Архитектура Проекта
В проекте используется событийно-ориентированный подход. Взаимодействие между слоями приложения происходит через обмен данными, вызванными определенными событиями.

Используется подход Model-View Presenter (MVP), который позволяет разделить отображение и данные. Архитектура состоит из трех слоев:
1. Model (Слой Данных) - бизнес логика, хранение и изменение данных.
2. View (Слой Представления) - отображение данных.
3. Presenter - взаимодействие Слоя Данных со Слоем Представления. Задача: получать данные из вне и отправлять данные.

# Слой Данных

## Interface IProduct
Описывает продукт в каталоге.
- `id: string` - уникальный идентификатор продукта.
- `title: string` - название продукта.
- `description?: string` - необязательное описание продукта.
- `category: string` - категория продукта
- `price: number` - цена продукта.
- `image: string` - URL на изображения продукта.

## Interface IBasket
Описывает корзину.
- `id: string` - уникальный идентификатор корзины (своя корзина есть у каждого пользователя приложения).
- `price: number` - базовая стоимость продуктов в корзине.
- `total: number` - стоимость продукта в корзине с учетом скидок.
- `items: string[]` - перечень продуктов в корзине.

## Interface IOrderForm
Описывает форму оформления заказа.
- `email: string` - электронная почта покупателя.
- `phone: string` - телефонный номер покупателя.
- `address: string` - адрес доставки.
- `payment: string` - метод оплаты.

## Interface IOrderAddress
Описывает адрес заказа.
- `address: string` - адрес доставки.
- `payment: string` - метод оплаты.

## Interface IOrderContacts
Описывает контактные данные заказа.
- `email: string` - электронный адрес.
- `phone: string` - номер телефона.

## Interface IOrder extends IOrderAddress, IOrderContacts
Описывает заказ, расширяет IOrderAddress и IOrderContacts.
- `items: string[]` - перечень продуктов в заказе.
- `total: number` - стоимость продуктов в заказе.

## Interface IOrderResult
Описывает результат оформления заказа.
- `id: string` - уникальный идентификатор заказа.
- `total: number` - стоимость списанная или к оплате за заказ.

## Class AppState использует Interface IAppState
Управляет глобальным состоянием приложения.
- `getBasketItems` - возвращает товары в корзине.
- `addToBasket` - добавляет товар в корзину.
- `removeFromBasket` - удаляет товар из корзины.
- `clearBasket` - очищает корзину.
- `getTotal` - вычисляет общую стоимость.
- `setCatalog` - устанавливает и обновляет каталог товаров.
- `setPreview` - устанавливает товар для предварительного просмотра.
- `isProductInBasket` - проверяет находиться ли уже товар в корзине.
- `setOrder` - устанавливает заказ.
- `setPayment` - устанавливает метод оплаты.
- `setAddress` - устанавливает адрес.
- `setEmail` - устанавливает электронный адрес.
- `setPhone` - устанавливает номер телефона.
- `setOrderField` - устанавливает значения полей в форме заказа.
- `setContactsField` - устанавливает значения полей в контактной форме.
- `validateOrderPaymentMethod` - валидирует модальное окно со способами оплаты и адресом покупателя.
- `validateOrderContacts` - валидирует модальное окно с почтой и телефоном покупателя.

# Слой Представления

## Class Page<T> использует Interface IPage
Реализует отображение главного экрана со списком товаров.
- `set counter` - устанавливает значение счетчика в корзине.
- `set catalog` - заменяет содержимое catalog на переданные HTML-элементы.
- `set locked` - управляет блокировкой страницы.

## Class Modal<T> использует Interface IModal
Реализует управление модальными окнами.
- `set content` - устанавливает содержимое контентной области модального окна.
- `open` - открывает модальное окно.
- `close` - закрывает модальное окно.
- `handleEscape` - закрывает модальное окно по нажатию на Esc.
- `render` - рендер модального окна с данными, открывая его после рендеринга.

## Class Card<T> использует Interface ICard
Реализует отображение карточки товара.
- `set id` - устанавливает уникальный идентификатор для карточки.
- `get id` - возвращает уникальный идентификатор карточки.
- `set title` - устанавливает название товара.
- `get title` - возвращает название товара.
- `set image` - устанавливает изображение товара.
- `set description` - устанавливает описание товара.
- `set buttonText` - устанавливает текст для кнопки.
- `set price` - устанавливает стоимость товара.
- `get price` - возвращает стоимость товара.
- `set category` - устанавливает категорию товара.

## Class Basket<T> использует Interface IBasket
Реализует отображение карточки товара в корзине покупателя.
- `set items` - устанавливает товары в корзине.
- `set total` - устанавливает количество валюты к оплате.

## Class Form<T> использует Interface IFormState
Управляет закрытием и открытием форм и их валидацией.
- `onInputChange` - вызывает событие при изменении поля формы.
- `set valid` - включает или отключает кнопку отправки формы.
- `set errors` - устанавливает текст ошибок в форме.
- `render` - обновляет визуальное состояние и данные формы.

## Class OrderForm extends Form<T>
Управляет формой оформления заказа.

## Class ContactForm extends Form<T>
Управляет формой контактных данных для заказа.

## Class Success использует Interface ISuccess
Управляет отображением успешным завершением заказа.

# Слой Presenter (Коммуникации)

## Class API
Управляет запросами к удаленному серверу.
- `get` - выполняет GET запрос по URL.
- `post` - выполняет POST запрос по URL.

## Class WebLarekAPI extends API, использует Interface IWebLarekAPI
Расширяет базовый класс API для работы приложения.
- `getProductList` - получает список товаров с сервера.
- `getProductItem` - запрашивает данные об конкретном товаре.
- `orderProducts` - отправляет информацию о заказе и возвращает результат выполнения заказа.

## Class EventEmitter
Управляет событиями в приложении.
- `on` - подписывается на событие.
- `emit` - инициирует событие с данными.
- `off` - отписывается от события.
- `onAll` - слушает все события.
- `offAll` - сбрасывает все обработчики.
- `trigger` - создает коллбек триггер, генерирующий событие при вызове.